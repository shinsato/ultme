function setupDB(a){a.executeSql("CREATE TABLE IF NOT EXISTS user (id INTEGER UNIQUE,account_id INTEGER,name TEXT,email TEXT,password TEXT,tile_list TEXT, created NUMERIC, modified NUMERIC,deleted NUMERIC)"),a.executeSql('CREATE TABLE IF NOT EXISTS tile (id INTEGER UNIQUE,user_id INTEGER,account_id INTEGER,name TEXT,type TEXT NOT NULL DEFAULT "tally",status TEXT NOT NULL DEFAULT "active",options TEXT,min INTEGER,max INTEGER,created NUMERIC,modified NUMERIC,archived NUMERIC,deleted NUMERIC)'),a.executeSql("CREATE TABLE IF NOT EXISTS response (id INTEGER UNIQUE,account_id INTEGER,user_id INTEGER,tile_id INTEGER,value INTEGER,geolocation TEXT,created NUMERIC)")}function init(){var a=$("body"),e=$(".overlay"),t=$('[data-type="tally"]'),l=$('[data-type="binary"]'),i=$('[data-type="scale"]'),n=function(a){a.addClass("flash"),setTimeout(function(){a.removeClass("flash")},100)},o=function(){a.toggleClass("overlay-open")};t.each(function(a,e){var t=$(e),l=t.data("value"),i=$(t.find(".js-display"));$(e).on("click",function(a){var e=$(this);l+=1,i.text(l),e.attr("data-value",l),e.data("value",l),n(e)})}),l.each(function(a,e){var t=$(e),l=t.data("value"),i=$(t.find(".js-display"));$(e).on("click",function(a){console.log(l)})}),$(document).on("click","[toggle-overlay]",function(){var a=$(this).attr("toggle-overlay"),t=e.find("section");t.html(""),a.length&&t.load(a+".html"),o()})}function loadTiles(a){var e=[];a.db.transaction(function(a){a.executeSql("SELECT * FROM tile",[],function(a,l){for(var i=l.rows.length,n=0;i>n;n++)e.push(l.rows.item(n));console.log(e);for(t in e){var o=e[t].type,s=$('<div class="item '+o+'"></div>');switch(s.attr("data-value",0),s.attr("data-type",o),s.data("value",0),s.data("type",o),s.append("<h2>"+e[t].name+"</h2>"),o){case"binary":s.append('<label class="js-display string">0</label>'),s.attr("toggle-overlay","overlay/tile-binary");break;case"tally":s.append('<label class="js-display string">0</label>');break;case"scale":s.append('<label class="js-display string">0</label>'),s.attr("toggle-overlay","overlay/tile-scale")}$("#container").append(s)}init()},function(a,e){console.log("error",a,e)})})}